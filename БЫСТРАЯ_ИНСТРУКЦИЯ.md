# ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ ISRC

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–¢—Ä–µ–∫ "Meili" –æ—Ç Yenlik –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã:
- Meili (√µzen): $3,808.86 | 2.7M —Å—Ç—Ä–∏–º–æ–≤
- Meili (√ïZE√ë): $1,100.88 | 13.7M —Å—Ç—Ä–∏–º–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞**: –û–¥–Ω–∞ –ø–µ—Å–Ω—è, –Ω–æ —Ä–∞–∑–Ω—ã–µ –ª–µ–π–±–ª—ã ‚Üí —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–ª–∞ 2 –∑–∞–ø–∏—Å–∏  
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ISRC –∫–æ–¥ (—É –æ–±–µ–∏—Ö –∑–∞–ø–∏—Å–µ–π ISRC = `DG-A05-25-01737`)

---

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å (–ø–æ –ø–æ—Ä—è–¥–∫—É)

### 1Ô∏è‚É£ –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –û–±–Ω–æ–≤–∏—Ç—å —Å—Ö–µ–º—É –ë–î
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ë–î –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
psql -h <host> -U <user> -d music_analytics -f migration_add_isrc.sql
```

### 2Ô∏è‚É£ –õ–æ–∫–∞–ª—å–Ω–æ: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å ISRC
```bash
# –£ –≤–∞—Å —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã, –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
python3 precalc_data.py
```

### 3Ô∏è‚É£ –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
TRUNCATE TABLE track_subscription_stats CASCADE;
TRUNCATE TABLE track_monthly_stats CASCADE;
TRUNCATE TABLE track_country_stats CASCADE;
TRUNCATE TABLE track_platform_stats CASCADE;
TRUNCATE TABLE artist_monthly_stats CASCADE;
TRUNCATE TABLE track_countries CASCADE;
TRUNCATE TABLE track_platforms CASCADE;
TRUNCATE TABLE artist_countries CASCADE;
TRUNCATE TABLE artist_platforms CASCADE;
TRUNCATE TABLE track_aggregates CASCADE;
TRUNCATE TABLE artist_aggregates CASCADE;
TRUNCATE TABLE platform_aggregates CASCADE;
TRUNCATE TABLE tracks CASCADE;
TRUNCATE TABLE artists CASCADE;
TRUNCATE TABLE labels CASCADE;
TRUNCATE TABLE platforms CASCADE;
TRUNCATE TABLE countries CASCADE;
TRUNCATE TABLE subscription_types CASCADE;
```

### 4Ô∏è‚É£ –õ–æ–∫–∞–ª—å–Ω–æ: –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
```bash
python3 load_data_to_db.py
```

### 5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```sql
-- –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –û–î–ù–ê –∑–∞–ø–∏—Å—å –¥–ª—è Meili –æ—Ç Yenlik
SELECT 
    t.track_name,
    t.isrc,
    a.artist_name,
    ta.total_revenue,
    ta.total_streams
FROM tracks t
JOIN artists a ON t.artist_id = a.artist_id
LEFT JOIN track_aggregates ta ON t.track_id = ta.track_id
WHERE t.track_name = 'Meili' AND a.artist_name = 'Yenlik';
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
track_name |      isrc       | artist_name | total_revenue | total_streams
-----------|-----------------|-------------|---------------|---------------
Meili      | DG-A05-25-01737 | Yenlik      | ~5994.47      | ~19208820
```

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ SQL-–∞–≥–µ–Ω—Ç –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
```
—Ç–æ–ø 5 –ø–µ—Å–µ–Ω Yenlik –ø–æ –¥–æ—Ö–æ–¥—É

1. Meili
   üí∞ $5,994.47 | üéß 19,208,820
2. 16 Qyz
   üí∞ $985.62 | üéß 6,232,341
...
```

---

## üìù –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –∫–æ–¥–µ
‚úÖ `precalc_data.py` - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ ISRC  
‚úÖ `load_data_to_db.py` - –∑–∞–≥—Ä—É–∑–∫–∞ ISRC –≤ –ë–î  
‚úÖ `migration_add_isrc.sql` - —Å—Ö–µ–º–∞ –ë–î —Å ISRC  

–í—Å–µ —Ñ–∞–π–ª—ã —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
